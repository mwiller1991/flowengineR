% Generated by roxygen2: do not edit by hand
% Please edit documentation in
%   R/2_2_2_b_engine_execution_adaptive_output_batchtools_multicore.R
\name{wrapper_execution_adaptive_output_batchtools_multicore}
\alias{wrapper_execution_adaptive_output_batchtools_multicore}
\title{Wrapper for Execution Engine: Adaptive Batchtools Multicore Stability}
\usage{
wrapper_execution_adaptive_output_batchtools_multicore(control, split_output)
}
\arguments{
\item{control}{A standardized control object (see \code{controller_execution()}).}

\item{split_output}{A list containing exactly one split.}
}
\value{
A standardized execution output object.
}
\description{
Executes batches of 1-split workflows in parallel using \code{batchtools} with a multicore backend.
Each batch runs \code{n_splits_per_iteration} 1-split executions, which are dispatched as jobs and executed concurrently.
After each batch, a stability check is performed using a configurable strategy and metric.
The process continues until stability is reached or a maximum number of iterations is exceeded.
}
\details{
\strong{Important Constraint:}
Only splitter engines that return \strong{exactly one split} are supported.
Splitters such as cross-validation (\code{split_cv}) with \code{cv_folds > 1} are \strong{not allowed}.

\strong{Standardized Inputs:}
\itemize{
\item \code{control}: The full control object.
\item \code{split_output}: Dummy result from the splitter to validate structure.
\item \code{control$params$execution$params}: Execution-specific configuration (see below).
}

\strong{Engine-Specific Parameters (\code{control$params$execution$params}):}
\itemize{
\item \code{metric_name} \emph{(character, default = "mse")}: Metric to monitor.
\item \code{metric_source} \emph{(character, default = "eval_mse")}: Evaluation engine providing the metric.
\item \code{stability_strategy} \emph{(character)}: Strategy to assess convergence.
Allowed values:
\code{"custom_relative"}, \code{"custom_absolute"},
\code{"mean_relative"}, \code{"mean_absolute"},
\code{"sd_relative"}, \code{"sd_absolute"},
\code{"mad_relative"}, \code{"mad_absolute"},
\code{"cv_relative"}, \code{"cv_absolute"},
\code{"cohen_absolute"}
\item \code{threshold} \emph{(numeric)}: Stability threshold.
\item \code{window} \emph{(integer ≥ 2)}: Number of trailing values for comparison.
\item \code{min_splits} \emph{(integer ≥ 1)}: Minimum iterations before checking for stability.
\item \code{max_splits} \emph{(integer ≥ min_splits)}: Maximum iterations allowed.
\item \code{custom_stability_function} \emph{(function or NULL)}: Optional custom convergence function.
\item \code{seed_base} \emph{(integer)}: Base seed; seed for split \code{i} is \code{seed_base + i}.
\item \code{n_splits_per_iteration} \emph{(integer ≥ 1)}: Number of splits executed per batch (parallel jobs).
\item \code{registry_folder} \emph{(character)}: Path to writeable batchtools registry folder.
\item \code{seed} \emph{(integer)}: Seed for initializing batchtools registry.
\item \code{required_packages} \emph{(character vector)}: Required packages on each job node.
\item \code{ncpus} \emph{(integer ≥ 1)}: Number of CPUs used per job.
}

\strong{Example Control Snippet:}

\if{html}{\out{<div class="sourceCode">}}\preformatted{control$engine_select$execution <- "execution_adaptive_output_batchtools_multicore"
control$params$execution <- controller_execution(
  params = list(
    metric_name = "mse",
    metric_source = "eval_mse",
    stability_strategy = "cohen_absolute",
    threshold = 0.2,
    window = 3,
    min_splits = 5,
    max_splits = 50,
    seed_base = 2000,
    n_splits_per_iteration = 3,
    registry_folder = "~/flowengineR/tests/BATCHTOOLS/bt_registry_adaptive_output_multicore",
    seed = 123,
    required_packages = c("caret", "dplyr"),
    ncpus = 4
  )
)
}\if{html}{\out{</div>}}

\strong{Template Reference:}
See full template in \verb{inst/templates_control/2_2_b_template_execution_adaptive_output_batchtools_multicore.R}

\strong{Standardized Output (returned to framework):}
A list as created by \code{initialize_output_execution()}:
\itemize{
\item \code{execution_type}: \code{"adaptive_output_batchtools_multicore"}
\item \code{workflow_results}: List of results from \code{run_workflow_singlesplitloop()} per split
\item \code{params}: All resolved execution parameters
\item \code{continue_workflow}: Always \code{TRUE}
\item \code{specific_output}: Includes:
\itemize{
\item \code{metric_name}, \code{metric_source}
\item \code{values}: Vector of all monitored metric values
\item \code{split_output}: Combined \code{initialize_output_split()} result
\item \code{used_seeds}: List of all used seeds
}
}
}
\seealso{
\code{\link[=engine_execution_adaptive_output_batchtools_multicore]{engine_execution_adaptive_output_batchtools_multicore()}},
\code{\link[=default_params_execution_adaptive_output_batchtools_multicore]{default_params_execution_adaptive_output_batchtools_multicore()}},
\code{\link[=initialize_output_execution]{initialize_output_execution()}},
\code{\link[=controller_execution]{controller_execution()}},
Template: \verb{inst/templates_control/2_2_b_template_execution_adaptive_output_batchtools_multicore.R}
}
\keyword{internal}
